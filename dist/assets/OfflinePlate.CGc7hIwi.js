import{_ as T,r as k,c as r,a,k as Y,l as c,e as m,v,n as p,t as f,F as I,f as x,h as F,u as $,o as u,ap as V,Z as g}from"./main.Du-5drNh.js";const B={class:"compulsory-insurance rounded-3 card my-2",style:{"border-color":"#efefef"},dir:"rtl"},D={class:"card-body p-0"},K={key:0,class:"card-body p-4"},S={class:"row g-4"},E={class:"col-md-6"},O={class:"form-group"},z={key:0,class:"invalid-feedback d-block"},L={class:"col-md-6"},M={class:"form-group"},Z={key:0,class:"invalid-feedback d-block"},A={class:"col-md-6"},R={class:"form-group"},q={key:0,class:"invalid-feedback d-block"},G={class:"col-md-6"},H={class:"form-group"},J={key:0,class:"invalid-feedback d-block"},Q={class:"col-md-6"},W={class:"form-group"},X={key:0,class:"invalid-feedback d-block"},ee={class:"col-md-6"},le={class:"form-group"},ae={key:0,class:"invalid-feedback d-block"},se={class:"col-md-6"},te={class:"form-group"},oe={key:0,class:"invalid-feedback d-block"},ne={class:"col-md-6"},ie={class:"form-group"},re={key:0,class:"invalid-feedback d-block"},ue={class:"col-md-6"},de={class:"form-group"},ce={key:0,class:"invalid-feedback d-block"},ve={class:"col-md-6"},me={class:"form-group"},fe={key:0,class:"invalid-feedback d-block"},pe={class:"col-md-6"},be={class:"form-group"},ye={key:0,class:"invalid-feedback d-block"},_e={class:"col-md-6"},he={class:"form-group"},ke={class:"d-flex gap-2 flex-wrap align-items-center"},ge=["onUpdate:modelValue","placeholder","onInput","onKeydown"],Ne=["onUpdate:modelValue","placeholder","onInput","onKeydown"],we={key:0,class:"text-danger"},Ie={class:"col-md-6"},xe={class:"form-group"},Ve={key:0,class:"invalid-feedback d-block"},Ue={class:"col-md-6"},je={class:"form-group"},Ce={key:0,class:"invalid-feedback d-block"},Pe={class:"col-md-6"},Te={class:"form-group"},Ye={key:0,class:"invalid-feedback d-block"},Fe={class:"col-md-6"},$e={class:"form-group"},Be={key:0,class:"invalid-feedback d-block"},De={class:"card-footer bg-white d-flex justify-content-end border-top rounded-bottom py-3 mt-4"},Ke=["disabled"],Se={key:0},Ee={key:1,class:"spinner-border spinner-border-sm",role:"status"},Oe={key:1,class:"d-flex justify-content-center align-items-center py-5"},ze={__name:"OfflinePlate",setup(Le){const U=F(),j=$(),_=k(!1),s=k({ownerName:"",nationalId:"",passport:"",address:"",job:"",brand:"",model:"",manufacturingYear:"",licenseType:"",plateNumber:"       ",chassisNumber:"",engineNumber:"",cylinders:"",lastInsuranceCompany:"",phoneNumber:"",vehicle_color:""}),h=k([]),d=k(["","","","","","",""]),l=k({});function b(o){const e=o.target,t=e.dataset.filter,n=e.name;let i=e.value;t==="text"?i=i.replace(/[^ء-يa-zA-Z\s]/g,""):t==="number"&&(i=i.replace(/[^0-9]/g,"")),e.value=i,n&&s.value.hasOwnProperty(n)&&(s.value[n]=i)}const N=async(o,e)=>{const t=e.target.value.toUpperCase();if(o<3)if(/^[\u0600-\u06FF]$/.test(t)){d.value[o]=t;const n=d.value.slice(0,3).filter(y=>y!=="").join(""),i=d.value.slice(3).filter(y=>y!=="").join("");s.value.plateNumber=n+i,o<2&&(await g(),h.value[o+1].focus())}else e.target.value=d.value[o];else if(/^\d$/.test(t)){d.value[o]=t;const n=d.value.slice(0,3).filter(y=>y!=="").join(""),i=d.value.slice(3).filter(y=>y!=="").join("");s.value.plateNumber=n+i,o<6&&(await g(),h.value[o+1].focus())}else e.target.value=d.value[o]},w=async(o,e)=>{if(e.key==="Backspace"){d.value[o]="";const t=d.value.slice(0,3).filter(i=>i!=="").join(""),n=d.value.slice(3).filter(i=>i!=="").join("");s.value.plateNumber=t+n,o>0&&(await g(),h.value[o-1].focus())}},C=()=>{l.value={};let o=!0;if(s.value.ownerName.trim()?l.value.ownerName="":(l.value.ownerName="اسم المالك مطلوب",o=!1),s.value.vehicle_color.trim()?/^\d+$/.test(s.value.vehicle_color)&&(l.value.vehicle_color="لون المركبة يجب أن يكون حروف فقط"):(l.value.vehicle_color="لون المركبه مطلوب",o=!1),s.value.nationalId.trim()?/^\d+$/.test(s.value.nationalId)&&s.value.nationalId.length!==14?(l.value.nationalId="الرقم القومي يجب أن يكون 14 رقم",o=!1):l.value.nationalId="":(l.value.nationalId="الرقم القومي مطلوب",o=!1),s.value.phoneNumber.trim()?/^(010|011|012|015)\d{8}$/.test(s.value.phoneNumber)||(l.value.phoneNumber="ادخل رقم تليفون صالح",o=!1):(l.value.phoneNumber="رقم التليفون مطلوب",o=!1),s.value.address.trim()||(l.value.address="العنوان مطلوب",o=!1),s.value.job.trim()||(l.value.job="الوظيفة مطلوبة",o=!1),s.value.passport.trim()||(l.value.passport="جواز السفر  مطلوب",o=!1),s.value.brand.trim()||(l.value.brand="الماركة مطلوبة",o=!1),s.value.model.trim()||(l.value.model="الطراز مطلوب",o=!1),!s.value.manufacturingYear)l.value.manufacturingYear="سنة الصنع مطلوبة",o=!1;else{const n=parseInt(s.value.manufacturingYear),i=new Date().getFullYear();(n<1900||n>i)&&(l.value.manufacturingYear="سنة الصنع غير صحيحة",o=!1)}s.value.licenseType.trim()||(l.value.licenseType="نوع الترخيص مطلوب",o=!1),s.value.plateNumber||(l.value.plateNumber="رقم اللوحة مطلوب",o=!1),s.value.chassisNumber.trim()||(l.value.chassisNumber="رقم الشاسيه مطلوب",o=!1),s.value.engineNumber.trim()||(l.value.engineNumber="رقم الموتور مطلوب",o=!1),s.value.cylinders.trim()?/^\d+$/.test(s.value.cylinders)||(l.value.cylinders="السلندرات يجب أن تكون أرقام فقط",o=!1):(l.value.cylinders="السلندرات مطلوبة",o=!1),s.value.lastInsuranceCompany.trim()||(l.value.lastInsuranceCompany="آخر شركة تأمين مطلوبة",o=!1);const e=d.value.slice(0,3).filter(n=>n!=="").join(""),t=d.value.slice(3).filter(n=>n!=="").join("");return/^[\u0600-\u06FF]{2,3}$/.test(e)||(l.value.plateNumber="يجب إدخال حرفين أو ثلاثة حروف عربية في البداية",o=!1),/^\d{3,4}$/.test(t)||(l.value.plateNumber="يجب إدخال ثلاثة أو أربعة أرقام في النهاية",o=!1),o},P=async()=>{if(C()){_.value=!0;try{await j.dispatch("Vehicle/setUserData",s.value),U.push("./customs-plate-insurance-offline")}catch(o){console.error("خطأ أثناء التخزين في localStorage:",o)}finally{_.value=!1}}};return(o,e)=>(u(),r("div",B,[a("div",D,[e[33]||(e[33]=a("header",{class:"card-header bg-white border-bottom rounded-top py-3",style:{"border-color":"#F1F1F1"}},[a("h1",{class:"card-title mb-0 fw-bold fs-4"},"تأمين لوحة جمركيه")],-1)),_.value?(u(),r("div",Oe,e[32]||(e[32]=[a("div",{class:"spinner-border text-danger",role:"status"},[a("span",{class:"visually-hidden"},"Loading...")],-1)]))):(u(),r("section",K,[a("form",{onSubmit:Y(P,["prevent"])},[a("div",S,[a("div",E,[a("div",O,[e[15]||(e[15]=a("label",{class:"form-label fw-medium mb-2"},"اسم المالك",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>s.value.ownerName=t),onInput:b,name:"ownerName","data-filter":"text",class:p(["form-control",{"is-invalid":l.value.ownerName}]),placeholder:"اسم المالك"},null,34),[[v,s.value.ownerName]]),l.value.ownerName?(u(),r("div",z,f(l.value.ownerName),1)):m("",!0)])]),a("div",L,[a("div",M,[e[16]||(e[16]=a("label",{class:"form-label fw-medium mb-2"},"الرقم القومي",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>s.value.nationalId=t),maxlength:"14",onInput:b,name:"nationalId","data-filter":"number",class:p(["form-control",{"is-invalid":l.value.nationalId}]),placeholder:"الرقم القومي"},null,34),[[v,s.value.nationalId]]),l.value.nationalId?(u(),r("div",Z,f(l.value.nationalId),1)):m("",!0)])]),a("div",A,[a("div",R,[e[17]||(e[17]=a("label",{class:"form-label fw-medium mb-2"},"جواز السفر",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>s.value.passport=t),class:p(["form-control",{"is-invalid":l.value.passport}]),placeholder:"جواز السفر"},null,2),[[v,s.value.passport]]),l.value.passport?(u(),r("div",q,f(l.value.passport),1)):m("",!0)])]),a("div",G,[a("div",H,[e[18]||(e[18]=a("label",{class:"form-label fw-medium mb-2"},"العنوان",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>s.value.address=t),class:p(["form-control",{"is-invalid":l.value.address}]),placeholder:"العنوان"},null,2),[[v,s.value.address]]),l.value.address?(u(),r("div",J,f(l.value.address),1)):m("",!0)])]),a("div",Q,[a("div",W,[e[19]||(e[19]=a("label",{class:"form-label fw-medium mb-2"},"الوظيفه",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>s.value.job=t),class:p(["form-control",{"is-invalid":l.value.job}]),placeholder:"الوظيفه"},null,2),[[v,s.value.job]]),l.value.job?(u(),r("div",X,f(l.value.job),1)):m("",!0)])]),a("div",ee,[a("div",le,[e[20]||(e[20]=a("label",{class:"form-label fw-medium mb-2"},"رقم التليفون",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>s.value.phoneNumber=t),onInput:b,name:"phoneNumber","data-filter":"number",class:p(["form-control",{"is-invalid":l.value.phoneNumber}]),placeholder:"رقم تليفون المالك"},null,34),[[v,s.value.phoneNumber]]),l.value.phoneNumber?(u(),r("div",ae,f(l.value.phoneNumber),1)):m("",!0)])]),a("div",se,[a("div",te,[e[21]||(e[21]=a("label",{class:"form-label fw-medium mb-2"},"الماركه",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=t=>s.value.brand=t),class:p(["form-control",{"is-invalid":l.value.brand}]),placeholder:"الماركه"},null,2),[[v,s.value.brand]]),l.value.brand?(u(),r("div",oe,f(l.value.brand),1)):m("",!0)])]),a("div",ne,[a("div",ie,[e[22]||(e[22]=a("label",{class:"form-label fw-medium mb-2"},"الطراز",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>s.value.model=t),class:p(["form-control",{"is-invalid":l.value.model}]),placeholder:"الطراز"},null,2),[[v,s.value.model]]),l.value.model?(u(),r("div",re,f(l.value.model),1)):m("",!0)])]),a("div",ue,[a("div",de,[e[23]||(e[23]=a("label",{class:"form-label fw-medium mb-2"},"سنه الصنع",-1)),c(a("input",{type:"number",step:"1","onUpdate:modelValue":e[8]||(e[8]=t=>s.value.manufacturingYear=t),class:p(["form-control",{"is-invalid":l.value.manufacturingYear}]),placeholder:"سنه الصنع",min:"1"},null,2),[[v,s.value.manufacturingYear]]),l.value.manufacturingYear?(u(),r("div",ce,f(l.value.manufacturingYear),1)):m("",!0)])]),a("div",ve,[a("div",me,[e[24]||(e[24]=a("label",{class:"form-label fw-medium mb-2"},"لون المركبة",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=t=>s.value.vehicle_color=t),class:p(["form-control",{"is-invalid":l.value.vehicle_color}]),placeholder:"ادخل لون المركبة",onInput:b,name:"vehicle_color","data-filter":"text"},null,34),[[v,s.value.vehicle_color]]),l.value.vehicle_color?(u(),r("div",fe,f(l.value.vehicle_color),1)):m("",!0)])]),a("div",pe,[a("div",be,[e[25]||(e[25]=a("label",{class:"form-label fw-medium mb-2"},"نوع الترخيص",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=t=>s.value.licenseType=t),onInput:b,name:"licenseType","data-filter":"text",class:p(["form-control",{"is-invalid":l.value.licenseType}]),placeholder:"نوع الترخيص"},null,34),[[v,s.value.licenseType]]),l.value.licenseType?(u(),r("div",ye,f(l.value.licenseType),1)):m("",!0)])]),a("div",_e,[a("div",he,[e[27]||(e[27]=a("label",{class:"form-label fw-medium mb-2"},"رقم اللوحة",-1)),a("div",ke,[(u(!0),r(I,null,x(d.value.slice(0,3),(t,n)=>c((u(),r("input",{key:n,"onUpdate:modelValue":i=>d.value[n]=i,type:"text",maxlength:"1",placeholder:["ا","ب","ج"][n],class:"form-control text-danger text-center plate-box",onInput:i=>N(n,i),onKeydown:V(i=>w(n,i),["backspace"]),ref_for:!0,ref_key:"plateInputs",ref:h},null,40,ge)),[[v,d.value[n]]])),128)),e[26]||(e[26]=a("div",{class:"plate-separator mx-1"},null,-1)),(u(!0),r(I,null,x(d.value.slice(3),(t,n)=>c((u(),r("input",{key:n+3,"onUpdate:modelValue":i=>d.value[n+3]=i,type:"text",maxlength:"1",placeholder:["1","2","3","4"][n],class:"form-control text-danger text-center plate-box",onInput:i=>N(n+3,i),onKeydown:V(i=>w(n+3,i),["backspace"]),ref_for:!0,ref_key:"plateInputs",ref:h},null,40,Ne)),[[v,d.value[n+3]]])),128))]),l.value.plateNumber?(u(),r("p",we,f(l.value.plateNumber),1)):m("",!0)])]),a("div",Ie,[a("div",xe,[e[28]||(e[28]=a("label",{class:"form-label fw-medium mb-2"},"رقم الشاسيه",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=t=>s.value.chassisNumber=t),class:p(["form-control",{"is-invalid":l.value.chassisNumber}]),placeholder:"رقم الشاسيه"},null,2),[[v,s.value.chassisNumber]]),l.value.chassisNumber?(u(),r("div",Ve,f(l.value.chassisNumber),1)):m("",!0)])]),a("div",Ue,[a("div",je,[e[29]||(e[29]=a("label",{class:"form-label fw-medium mb-2"},"رقم الموتور",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=t=>s.value.engineNumber=t),class:p(["form-control",{"is-invalid":l.value.engineNumber}]),placeholder:"رقم الموتور"},null,2),[[v,s.value.engineNumber]]),l.value.engineNumber?(u(),r("div",Ce,f(l.value.engineNumber),1)):m("",!0)])]),a("div",Pe,[a("div",Te,[e[30]||(e[30]=a("label",{class:"form-label fw-medium mb-2"},"السلندرات",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[13]||(e[13]=t=>s.value.cylinders=t),onInput:b,name:"cylinders","data-filter":"number",class:p(["form-control",{"is-invalid":l.value.cylinders}]),placeholder:"السلندرات"},null,34),[[v,s.value.cylinders]]),l.value.cylinders?(u(),r("div",Ye,f(l.value.cylinders),1)):m("",!0)])]),a("div",Fe,[a("div",$e,[e[31]||(e[31]=a("label",{class:"form-label fw-medium mb-2"},"اخر شركه تامين",-1)),c(a("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=t=>s.value.lastInsuranceCompany=t),class:p(["form-control",{"is-invalid":l.value.lastInsuranceCompany}]),placeholder:"آخر شركة تأمين",onInput:b,name:"lastInsuranceCompany","data-filter":"text"},null,34),[[v,s.value.lastInsuranceCompany]]),l.value.lastInsuranceCompany?(u(),r("div",Be,f(l.value.lastInsuranceCompany),1)):m("",!0)])])]),a("footer",De,[a("button",{class:"btn btn-danger rounded-3 py-2 fw-bold",style:{width:"300px"},disabled:_.value,type:"submit"},[_.value?(u(),r("div",Ee)):(u(),r("span",Se,"التالي"))],8,Ke)])],32)]))])]))}},Ze=T(ze,[["__scopeId","data-v-4c841530"]]);export{Ze as default};
